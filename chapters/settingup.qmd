
## sshによるリモート接続

### シンプルなssh接続（パスワード認証の場合）

### 公開鍵認証によるssh接続

sshで公開鍵（ペアとなる秘密鍵も作られる）を作り、それをリモートユーザーの `~/.ssh/authorized_keys` に追加することで、公開鍵認証によるssh接続を確立することができる。公開鍵認証時に暗号化されている秘密鍵を取り出すためににパスワードが必要となるが、このパスワードをしないで秘密鍵をつくっておくと、パスワードなしのログインができるようになる。

公開鍵をリモートユーザーの `~/.ssh/authorized_keys` に追加するには、`ssh-copy-id`コマンドを使用する。しかし、Windows環境では、ssh-copy-idコマンドが標準で提供されていないため、ここではPowerShellモジュールである`SSH-Copy-ID`を用いる方法を紹介する。なお、このようなスクリプトに頼らなくてもリモート先でエディアをつかって`~/.ssh/authorized_keys` を編集すれば公開鍵を登録することができる。

[`SSH-Copy-ID`はPowerShell Gallaryで公開されている](https://www.powershellgallery.com/packages/SSH-Copy-ID/1.0.1)。
インストールするには、管理者権限のもと以下のコマンドを実行する。
```
Install-Module -Name SSH-Copy-ID
```

管理者権限でPowerShellを実行するには、管理者権限で実行されているWindowsターミナルから実行するか、`sudo`コマンドで実行することができる。

管理者権限で実行されているWindowsターミナルの起動は、Windowsターミナルを右クリックして「管理者として実行」を選択するで実行することで行える。

`sudo`コマンドは以下のコマンドでインストールできる。
```
winget install sudo
```